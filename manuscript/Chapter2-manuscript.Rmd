---
title: "Hunting experience shapes individual foraging specialization and predator-prey interactions in an online videogame"
output: 
  word_document:
    reference_docx: Chapter2-styles.docx
    fig_caption: yes
    pandoc_args: ["-Fpandoc-crossref"] # to have eq. numbers
bibliography: references2.bib
csl: chicago-author-date.csl
---

```{r setup, include = FALSE}

knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)

library(data.table)
library(brms)
library(flextable)
library(officer)
library(tidyr)

```

```{r}

path <- file.path(here::here(), "data")

dat <- fread(
  file.path(path, "FraserFrancoetal2023-data.csv"),
  select = c("timestamp", "match_id", "realm_id",
             "environment_id", "avatar_id", "predator_id",
             "game_duration", "total_xp_pred", "cumul_xp_pred",
             "hunting_success", "pred_speed", "prey_avg_speed"))

dat[, c(2:6) := lapply(.SD, function (x) as.factor(x)), .SDcols = c(2:6)]

# To have a date column
dat[, date := as.POSIXct(sub(" .*", "", timestamp))]

```

Journal name : Ecology 

Manuscript type : article

Authors : Maxime Fraser Franco^1^, Francesca Santostefano^1,2^, Julien G. A. Martin^3^, Clint D. Kelly^1^, Pierre-Olivier Montiglio^1^ 

Affiliations : ^1^ Département des Sciences Biologiques, Université du Québec à Montréal, Montréal, QC, Canada. ^2^ Centre for Ecology and Conservation, Penryn Campus, University of Exeter, Cornwall, United Kingdom. ^3^ Department of Biology, University of Ottawa, Ottawa, ON, Canada. 

Corresponding author : fraser_franco.maxime@courrier.uqam.ca 

Authorship statement : With MFF as the leader, all authors participated in conceiving the ideas behind the study. MFF prepared the data, conducted the analyses, and wrote the manuscript. All authors reviewed and accepted the final version of the manuscript.

Open research statement : The data and code used to produce the results in this manuscript are freely available on GitHub https://github.com/quantitative-ecologist/experience-hunting-tactics

Keywords: foraging behaviour, arms race, reciprocal behavioural plasticity, learning, antipredator behaviour, virtual ecology




\newpage
# ABSTRACT {.unnumbered}




\newpage
# INTRODUCTION {.unnumbered}

Individual variation in predator foraging behaviour is increasingly recognized as a major driver of trophic interactions and community dynamics [@Griffen.etal2012;@Michalko.Pekar2016;@Moran.etal2017;@Michalko.etal2021]. Indeed, predator populations often comprise assemblages of individuals specializing in different foraging tactics or on different resources irrespective of sexual, morphological, or age-related differences [@Estes.etal2003;@Tinker.etal2008;@kernaleguenDeterminantsIndividualForaging2015;@Phillips.etal2017]. A growing body of evidence suggests that ecological interactions, such as predator-prey interactions, can drive such individual foraging specialization [@Araujo.etal2011;@toscanoPersonalityForagingBehavior2016]. When they hunt, predators often use techniques that are fine-tuned to the type of prey that they encounter [@Davoren.etal2003;@Estes.etal2003;@Woo.etal2008;@Courbin.etal2018], and their capacity to use them effectively is contingent on periods of extensive practice (i.e. experience). While hunting experience may be essential to maintain or improve foraging success, we have few empirical assessments of its role in predator foraging specialization [@Dukas2019] and its consequences on predator-prey interactions.

The development of foraging tactics is crucial for young predators to reach adulthood and survive [@Phillips.etal2017;@Heithaus.etal2018]. Theory predicts that foraging specialization may emerge via learning, limitations in memorizing multiple complex hunting skills, and expertise [@Tinker.etal2009;@Dukas2019]. @Dukas2019 defines expertise as the characteristics, skills, and knowledge allowing individuals with extensive experience to outperform novices on complex tasks. This body of work suggests that the development of expertise through extensive practice is an optimizing process that should promote foraging specialization. Empirical studies on human and non-human hunters show that experience optimizes the efficiency (e.g. search and handling times, return rates) of their foraging tactics potentially via associative images or reliance on prey and environmental cues [@Edwards.Jackson1994;@Morse2000;@macdonaldCrossculturalComparisonLearning2007;@Reid.etal2010;@Wilson-Rankin2015]. Such optimization may thus reinforce the use of the same tactic (i.e. specialization) if its success is constant each time a prey is encountered. It may also be costly to attempt different hunting tactics by trial and error when prey are scarce or highly unpredictable [@Dukas1998;@Estes.etal2003;@Mery.Burns2010]. An alternative mechanism is that the costs/risks faced by hunters when switching foraging tactics may be offset by gaining experience and information on their prey, leading to increased individual foraging flexibility [@Stephens1993;@Ishii.Shimada2010;@Mery.Burns2010;@Kelley.Magurran2011;@Snell-Rood2013]. To develop proper responses to fluctuating resources, individuals would need to sample their environment broadly during an extensive period of time, followed by higher performance at later stages of development [reviewed in @Snell-Rood2013]. However, predators can differ in the challenges that they face during their lifetime, which could lead to both mechanisms operating at the same time within a predator population. For instance, some individuals may constantly encounter faster prey, which are proven to be more difficult to hunt [@Walker.etal2005;@Kelley.Magurran2011;@FraserFranco.etal2022].

There is currently a lack of consensus on the fitness advantages of specialized vs flexible foraging. Importantly, we have limited information on the ecological contexts - except for competition - that favour specialization over flexibility. This is reflected in the literature showing contrasting results in the links between specialization and fitness. For instance, some studies report increasing benefits of specialization [@Pintor.etal2014;@Patrick.Weimerskirch2014a;@vandenBosch.etal2019], some report that flexible foraging has greater benefits [@Paull.etal2012;@Manlick.etal2021], and others find equal benefits depending on timescales [@Woo.etal2008;@Potier.etal2015]. While quantifying the fitness consequences of specialization is a daunting task, in predator-prey systems, some clues indicate that fluctuations in the predictability of prey encounters throughout a predator's lifetime may be a key factor [@Weimerskirch2007;@Woo.etal2008;@Chang.etal2017;@Phillips.etal2017;@Courbin.etal2018]. The resource-predictability hypothesis argues that when resources are predictable, individual specialists should have higher delivery rates by reducing the energy and time required to search for and handle prey. In contrast, individual generalists should benefit when resources fluctuate, as fine adjustments to resources are key for a predator's success and survival [@Karkarey.etal2017;@Holm.etal2019;@Santoro.etal2019]. At the phenotypic interface, empirical evidence shows that predators often match, among other types of traits [see @Kishida.etal2006;@Hanifin.etal2008;@Brousseau.etal2018;@Reimche.etal2020], their locomotor and behavioural traits to those of their prey [@McGhee.etal2013;@Bro-Jorgensen2013;@Chang.etal2017;@Szopa-Comley.Ioannou2022]. Yet, a recurring question that emerges from these studies is if and how the behavioural adjustments of predators reflect individual differences in experience/learning [@Kelley.Magurran2011]. Thus, uncovering the role of learning in predator-prey systems where interactions are directly monitored would enable researchers to better predict the behavioural decisions and the success of predators when they are hunting.

The integration of individual behavioural variation in the study of predator-prey interactions has gained traction in recent years, with empirical studies revealing important consequences for habitat use, functional responses, prey choice, and foraging rate [@Kobler.etal2009;@toscanoTraitmediatedFunctionalResponses2014;@Patrick.Weimerskirch2014;@Matsumura.Miyatake2022a]. However, an important and recurring challenge impeding research on predator-prey behavioural interactions, at the individual level, is the need to collect data simultaneously on both the predator and prey. We recently demonstrated with behavioural data from an online predator-prey videogame that virtual systems can overcome this challenge and help uncover the mechanisms that shape predator-prey interactions [@FraserFranco.etal2022]. For instance, we found that the classical locomotor crossover hypothesis [@Huey.Pianka1981] applied only to cursorial hunters [see also: @Matsumura.Miyatake2022a], suggesting that virtual systems could be useful in identifying general ecological patterns, which might in turn help to advance the current gaps in predator-prey research. Other studies on virtual predator-prey systems show that predation regimes can drive individual variation in risk perception [@Beauchamp2020], that familiarity between prey has a positive indirect effect on survival [@Cere.etal2021], and that prey face contrasting natural and social selection regimes (Santostefano et al. in prep). Because virtual predator-prey systems generate large volumes of data on interacting players throughout their lifetime in the game, they offer the opportunity to tackle fundamental questions about the role of experience and prey behaviour on individual predator foraging specialization along with their potential fitness consequences.

In this study, we test how hunting experience shapes predator foraging specialization using individual behavioural data from players in the online videogame *Dead by Daylight* (*DBD*). *DBD* simulates a direct predator-prey interaction, where one predator player hunts four prey players in different virtual environments. The data grants a high degree of precision on the behavioural interaction, as the behaviour of both the predator and the four prey is monitored simultaneously in each trial. First, we investigate how predators develop their individual hunting expertise. We hypothesize that predators should differ in the development of their expertise, partly because they encounter varying levels of difficulty with the prey that they pursue. For example, a predator may face greater difficulty than other individuals if it more often encountered prey that were elusive. Second, we test the hypothesis that experience will shape foraging specialization. If experience reduces the costs of switching between hunting tactics, we predict that the predator population should become more flexible. Alternatively, if experience enables the refinement of the hunting tactics, then the predator population may instead specialize. Otherwise, if both mechanisms operate at the same time, then we should see no change with experience at the population level, but differences in specialization among individuals should increase. Third, we evaluate how predator foraging specialization emerges from behavioural interactions with prey. Whether predators specialize or not with experience should depend on the behaviour of their prey. We expect that predators that experienced more predictable encounters with their prey will specialize, while predators that experienced unpredictable encounters with their prey should adopt a flexible hunting strategy. If we detect such prey-dependent fine-tuning, then specialist and flexible hunters should attain equal success.




# MATERIALS AND METHODS {.unnumbered}


## Study system

*DBD* is a survival asymmetric (i.e. a game where the gameplay  mechanics differ between two groups) multiplayer online game developed by Behaviour Interactive Inc, in which players can play either as a predator or a prey. The objective of the predator is to hunt and capture the four prey across a virtual environment. The objective of the four prey is to search for resources while avoiding the predator. The resources are in the form of power generators that, once they are all activated, will enable the prey to escape through one of two exit doors. The composition of the predator and prey group for a match is determined by a skill-based matchmaking algorithm. A match ends when the predator kills all the prey available (i.e. that have not escaped), or when the last remaining prey escapes the virtual environment. Each player, predator or prey, can choose an avatar with abilities that encourage specific play styles (e.g. bold vs cautious prey, or ambush vs roaming predator). During our study period, the game offered 23 predator avatars. The virtual environment where matches take place is composed of fixed and procedurally generated habitat components, such as vegetation, mazes, and buildings. Some of these environments are larger than others, with varying structural complexity. However, we have previously shown that predators display only minimal changes in behaviour and hunting success across the environments, probably due to a game feature enabling predators to have visual cues of the generators [@FraserFranco.etal2022]. There were `r toString(format(length(unique(dat$environment_id))))` virtual game environments available for play during our study period.

In *DBD*, some individual predators specialize on hunting at high speeds and covering space in the environment, while others prefer to stalk and ambush their prey [@FraserFranco.etal2022]. Individuals are also flexible in the use of these tactics by switching between them across matches. The expression of these tactics and their success is also shaped by the behaviour of the prey group. The prey need to forage for resources while paying attention to the predator to avoid being detected and chased. Some prey contribute to the group's success by healing or helping others escape the predator, while others play alone and attempt to escape by themselves [@Cere.etal2021]. Predators must learn how the prey behave and then decide how best to capture them. Thus, *DBD* simulates a highly dynamic system where both predators and prey must constantly adjust to each other to be successful.


## Data collection

The videogame company provided data that spanned a period of 6 months of gameplay recorded for every player. The first recorded match was played on `r toString(format(min(dat$date)))` and the last one on `r toString(format(max(dat$date)))`. We cleaned and filtered the raw data to produce a dataset appropriate for our analyses. We analyzed only matches where players did not know each other (i.e. "Online" mode). We filtered any matches where players were inactive, such as when speed values were equal to, or very close to, zero. Moreover, we used our knowledge of the game to remove any matches where players were potentially hacking, or not playing the game has it is supposed to be played. We then partitioned the player population by total experience, and sampled players that played 300 matches or more. To optimize the representation of gameplay experience at advanced levels, we set the maximum number of matches at 500 for these players. For instance, there could be a large difference in gameplay between 300-500 and 500-1000 matches. Players that played more than 500 matches represented ~2% of the population.

Our population consists of `r toString(format(length(unique(dat$predator_id))))` predator players with a total record of `r toString(formatC(length(unique(dat$match_id)), big.mark = " "))` matches. The predator-players' experience varied between `r toString(format(min(dat$total_xp_pred)))` and `r toString(format(max(dat$total_xp_pred)))` matches played. These matches lasted between `r toString(format(round(min(dat$game_duration / 60))), digits = 2)` and `r toString(format(round(max(dat$game_duration / 60))), digits = 2)`-min (mean = `r toString(format(round(mean(dat$game_duration / 60))), digits = 2)`-min). The following information is collected and reported for every match : the player's anonymous ID, its avatar, the game environment, the predator-player's experience along with its speed, and the average speed of the group of prey it encountered.

We recognize that we could have introduced a bias in our analyses since we sampled individuals who stayed in the game for at least 300 matches. For instance, these players may already be used to play videogames, and thus, could differ in the way they play at early stages of their experience in the game. To ensure that this was not the case, we randomly sampled players that played between 20 and 50 matches, between 51 and 100 matches, and between 101 and 300 matches. We then took the first 20 matches played by these players, including those from our sampled population, and compared their average behaviour using a Bayesian hierarchical linear model. We found that neither of the four groups differed in their average speed (Table SX), which gives us confidence that our player population was not biased.


## Variables

We analyzed the predator's average speed and the average speed of the prey encountered by the predator. The predator's average speed is measured as the average distance traveled per second during a match ($\overline{x}$ = `r toString(format(round(mean(dat$pred_speed), digits = 2), nsmall = 2))` ± `r toString(format(round(sd(dat$pred_speed), digits = 2), nsmall = 2))` m/s). We measured the preys' average speed as the average travel speed of the four individual prey within a match ($\overline{x}$ = `r toString(format(round(mean(dat$prey_avg_speed, na.rm = T), digits = 2), nsmall = 2))` ± `r toString(format(round(sd(dat$prey_avg_speed, na.rm = T), digits = 2), nsmall = 2))` m/s). We defined hunting success as the number of prey consumed during the match (min = `r toString(format(min(dat$hunting_success)))`, max = `r toString(format(max(dat$hunting_success)))`). Lastly, we defined the predator's cumulative experience as the number of matches played prior to the match being monitored. For example, the first match of a player would have a cumulative experience value of 0, while the tenth match would have a value of 9.


## Statistical analyses 

### Software and computer specifications

All our statistical analyses were executed on Cedar (https://docs.alliancecan.ca/wiki/Cedar), a computer cluster maintained by the Digital Research Alliance of Canada. The operating system for Cedar is CentOS Linux 7. The models were fitted in R (version 4.1.2) using Markov chain Monte Carlo (MCMC) sampling with the package "brms" version 2.16.3 [@Burkner2017], an R front-end for the STAN software [@StanDevelopmentTeam2023], and "cmdstanr" version 0.4.0 [@Gabry.Cesnovar2021] as the back-end for estimation (cmdstan installation version 2.28.2).

### Effect of experience on hunting success

We tested whether predators varied in the development of their expertise using three Bayesian generalized additive mixed models (GAMM) with thin plate regression splines. These models estimate the relationship between hunting success (i.e. number of prey captured) and the predators' cumulative experience (i.e. number of matches played before the current match). We parametrized the models following the method of @Pedersen.etal2019. The first model was the simplest, with a common global smoothing function for all observations and random intercepts for the predator ID. In this model, we assume that individuals have the same development of expertise, with the model estimating a trend for the average individual (i.e. global smoother). For the second model, we included varying group-level smoothers for the predator ID. In this model, we assume that individuals share a similar relationship between success and experience, but that this relationship can vary (e.g. individual 1 has a steeper curve than individual 2). This enabled us to test whether predators differed in the development of their expertise. In the third model, we kept the group-level smoothers for the predators, but removed the global smoother. This allows each individual to have a unique relationship between success and experience without penalization by the global smoother. Thus, this model assumes that predators do not share a common relationship between success and experience. We included match duration as a covariate in all three models.

Because a maximum of four prey can be captured in the game, and to control for overdispersion, we computed the three models using a modified version of the beta-binomial distribution implemented in "brms". Thus, hunting success was estimated as the probability of capturing the four prey ($\mu_i$), drawn from a Beta distribution ($Beta(\mu_i, \phi)$) with mean ($\mu \in [0,1]$) and precision ($\phi > 0$) parameters. We used a logit link function to estimate $\mu_i$ where $\mu_i = \frac{exp(\eta_i)}{exp(\eta_i) + 1}$ and $\eta_i$ is the linear predictor, while the precision parameter ($\phi$) was estimated with an identity link for all models. 

We used the default number of basis functions (K) in "brms" for the models to estimate the relationship between hunting success and experience. We assumed that the random intercepts for the predator ID ($id$) followed a Gaussian distribution with estimated standard deviation ($id \sim N(0,\ I\ \sigma_{id})$). We used Gaussian priors for the game duration ($N(0,\ 1)$), the intercept ($N(0,\ 0.5)$), and the precision paremeter ($N(2,\ 0.5)$). We employed the default Student t priors for the smoothing parameter ($t(3,\ 0,\ 2.5)$). In all models, we specified four MCMC chains to estimate the parameters, with 1000 posterior samples for each parameter. To do so, we ran 2500 iterations for the first model with a thinning set to eight, and 1500 iterations with a thinning set to four for the second and third models; burn-in was set to 500 iterations in each model. We assessed the convergence of the MCMC chains using trace plots, R-hat diagnostics with a threshold of <1.05, and effective sample sizes (ESS) with a threshold of >100 for the bulk-ESS and tail-ESS [@Vehtari.etal2021a]. After fitting the three models, we proceeded to select the one with the best predictive accuracy using approximate leave-one-out cross-validation with Pareto-smoothed importance sampling [@Vehtari.etal2017;@Piironen.Vehtari2017;@Vehtari.etal2022].

### Foraging behaviour and success, prey behaviour, and their relationships, at each level of experience

We tested whether foraging behaviour changed with experience, and compared the success of generalists vs specialists, using a multivariate, double-hierarchical generalized linear model (MDHGLM) [@leeDoubleHierarchicalGeneralized2006;@cleasbyQuantifyingPredictabilityBehaviour2015;@westneatBiologyHiddenResidual2014;@Mitchell.etal2016a;@ODea.etal2022]. We categorized the predators by their experience based on the number of matches they played (i.e. their cumulative experience). We assigned the status of "novice" to any predator-player that had a cumulative experience below 100 matches. For example, a predator player that played 500 matches in total would be labelled as a novice in its first 100 matches. Following this logic, we labelled predators as "intermediate" hunters when they had a cumulative experience between 100 and 299 and matches. For the third and last group, we defined predators as "advanced" hunters when they had a cumulative experience equal or above 300, with a maximum of 499 cumulated matches.

For each level of experience (i.e. novice, intermediate, advanced), the model estimated the mean speed of every individual (which we call the mean part of the model) and, by using a heterogeneous structure of the residuals, the intra-individual standard deviation of speed for every individual (which we call the dispersion part of the model). Thus, in the mean part of the model, we could estimate among individual differences in the foraging tactic used by predators (i.e. fast or slow), while in the dispersion part of the model, we could estimate among individual differences in foraging specialization/flexibility (i.e. intra-individual variability). We followed the same structure for the preys' speed to estimate among individual differences in the mean and standard deviation of speed of the prey encountered by predators. For hunting success, we only modeled the mean part of the equation to estimate among individual differences in mean hunting success. For the predator and the prey's speed, we controlled for the average rank of the prey that they encountered on both the mean and dispersion part of the equation. The ranking system in *DBD* was implemented by the company to pair players in a match based on their skill (https://deadbydaylight.fandom.com/wiki/Rank). We used the mean rank of the four prey and applied a square-root transformation. For the predator's hunting success, we controlled for the square-root of the duration of the match.

We estimated the correlation between the individual random effect on the mean and on the dispersion within each trait (e.g. $cor(\sigma_{id_{m}\ pred}\ \sigma_{id_{d}\ pred})$) and among each trait (e.g. $cor(\sigma_{id_{m}\ pred}\ \sigma_{id_{d}\ prey})$) within a level of experience. In the first case, this allows us to assess, for example, whether predators that are on average slower/faster are more specialized or flexible. In the second case, the correlations enables us to estimate, for example, whether predators that encountered prey that were faster/slower adopted a slower/faster (or more specialized/flexible) tactic, or if slower/faster predators had lower/greater hunting success. We also evaluated these correlations among the different levels of experience (e.g. $cor(\sigma_{id_{m}\ pred\ novice}\ \sigma_{id_{d}\ pred\ intermediate})$). The latter "character-state" approach [@Via.Lande1985;@viaAdaptivePhenotypicPlasticity1995], enables us to investigate whether predators express similar behaviours across each of three developmental stages. 

The full model has the following form, with each equation repeated three times (i.e. one for each level of experience) :

$$
\begin{align}
speed_{pred} &= \text{ } X_{m}\ b_m + M\ env_{m} + N\ av_{m} + Z\ id_{m} + e \\
log(\sigma_{e,\ pred}) &= X_{d}\ b_{d} + Z\ id_{d}
\end{align}
$${#eq:eqn1}

$$
\begin{align}
speed_{prey} &= \text{ } X_{m}\ b_m + M\ env_{m} + N\ av_{m} + Z\ id_{m} + e \\
log(\sigma_{e,\ prey}) &= X_{d}\ b_{d} + Z\ id_{d}
\end{align}
$${#eq:eqn2}

$$
\begin{align}
success_{pred} &= \text{ } X_{m}\ b_m + Z\ id_{m} + e
\end{align}
$${#eq:eqn3}

where $env$, $av$, and $id$ are the vectors of random environment, random avatar, and random individual identity effects associated with their incidence matrices $M$, $N$, and $Z$. $b$ is the vector of fixed effects with its incidence matrix $X$. The $m$ and $d$ subscripts indicate that an estimate is from the mean or dispersion part of the model, respectively. On the mean part of the model, we assumed that the game environment and avatar random effects followed a Gaussian distribution with estimated standard deviation ($env \sim N(0,\ I\ \sigma_{env})$ and $av \sim N(0,\ I\ \sigma_{av})$). $I$ is the identity matrix, with $I\sigma$ indicating that the random effects are independently and identically distributed. The residuals are assumed to follow a Gaussian distribution ($e \sim N(0,\ \sigma_{e})$). On the dispersion part of the model, the residuals vary among individuals, allowing us to estimate among individual differences in specialization. The individual identity random effects on both the mean and dispersion parts follow a multivariate Gaussian distribution $[\begin{array}{cc} id_m \\ id_d \end{array}] \sim MVN(0,\ \Sigma_{id})$ where $\Sigma_{id}$ is a 15x15 variance-covariance matrix. The parameters $\sigma_{env}$, $\sigma_{av}$, and $\sigma_{id}$, correspond to the among environment, among avatar, and among individual standard deviations, respectively.

We parameterized equations (1) and (2) with a Gaussian distribution family (predator and prey speed) and used a beta-binomial distribution family for equation (3) (predator hunting success). We used Gaussian priors for the prey rank ($N(2.5,\ 1)$) and game duration ($N(10,\ 2)$) on the mean part of the model, and the default priors in "brms" for the dispersion part. We used the default Student t priors in "brms" for the intercepts on the mean and dispersion part of the equation. For hunting success, we applied a Gaussian prior on the precision parameter ($N(2,\ 1)$). For every predicted variable, we applied a half-Gaussian on the random effects for the mean part of the model ($N(0,\ 1)$), and the default "brms" Student t prior for the dispersion part of the model. We parametrized the model to run four MCMC chains with 1000 posterior samples for each parameter by completing 2500 iterations having a thinning set to 8, with the first 500 iterations used as warmups. We assessed the convergence of the MCMC chains using trace plots, R-hat diagnostics with a threshold of <1.05, and effective sample sizes (ESS) with a threshold of >100 for the bulk-ESS and tail-ESS [@Vehtari.etal2021a]. We also performed posterior predictive checks which showed an adequate fit of the model (for details, see https://github.com/quantitative-ecologist/experience-hunting-tactics). We additionally report variance partitioning and coefficients of variations in the supporting information (Appendix S1).




# RESULTS {.unnumbered}


## Effect of experience on hunting success

Our results confirm that individual predators display substantial differences in the development of their expertise, as the best model included group-level smoothers exclusively (Table I). For instance, some predators steadily increased (Figure 1A, Appendix S1: Figure S1A), while others decreased (Figure 1A, Appendix S1: Figure S1B), their hunting success with greater experience, and others whose success did not change with experience (Figure 1A). Another pattern that emerged was that some individuals optimized their success at an experience level that was below what we considered "advanced" (i.e. >300 matches played).

```{r table1, ft.align = "left"}

tab1 <- readRDS(here::here("outputs", "05_outputs_tables", "05_table1.rds"))

tab1 <- autofit(tab1)

tab1 <- tab1 %>% 
  footnote(
    i = 1, j = 1,
    part = "header",
    value = as_paragraph(
      "* 'elpd' refers to the 'expected log pointwise density' and is the value chosen to select the best model."),
    ref_symbols = " "
  ) %>%
  font(fontname = "Times New Roman", part = "all") %>%
  fontsize(size = 11, part = "all")

set_caption(
  tab1,
  caption = "Leave-one-out cross-validation table of the three hierarchical GAMMs relating hunting success to player experience",
  style = "Table Caption"
)

```

We predicted that the relationship between hunting success and experience would vary among predators because they should differ in the type of prey that they encounter. However, after controlling for prey speed, we did not find evidence confirming this prediction, because differences among predators remained stable (Figure 1B).

```{r fig1, out.width = "100%", fig.cap = "**Figure 1.** Among individual differences in the development of hunting expertise. The predators' hunting success (i.e. the probability of capturing the four prey) is on the y axis, and the predators' cumulative experience (i.e. the number of matches played prior to each observation) is on the x axis. Each fitted curve represents an individual predator. (A) A generalized additive mixed model where we do not control for prey speed (B) A generalized additive mixed model where we control for prey speed."}

knitr::include_graphics(here::here("outputs", "05_outputs_figures", "05_figure1.png"))

```


## Effect of experience on the development of behavioural specialization

At the population level, we predicted that predators would become either increasingly flexible or specialized with more experience. However, our results do not support this prediction. Indeed, the observed pattern is more complex than expected given that predators became more flexible with experience at intermediate levels of experience (i.e. intercept of sigma for predator speed is larger for intermediates than novices; Table 2 and Appendix S1: Figure S4), but then return to novice-levels with advanced experience (i.e. intercept of sigma for predator speed is smaller for advanced players than intermediates; Table 2 and Appendix S1: Figure S4). Thus, our analyses suggest that population-level behavioural specialization changes nonlinearly (quadratic) with experience rather than linearly.

```{r table2, ft.align = "left"}

tab2 <- readRDS(here::here("outputs", "05_outputs_tables", "05_table2.rds"))

tab2 <- autofit(tab2)

tab2 <- tab2 %>% 
  footnote(
    i = 1, j = 1,
    part = "header",
    value = as_paragraph(
      "* We exponentiated the dispersion parameters (i.e. sigma) which are estimated on a log scale. We back-transformed the hunting success values, estimated on a logit scale, back to a probability scale."),
    ref_symbols = " "
  ) %>%
  font(fontname = "Times New Roman", part = "all") %>%
  width(j = c(2,3,4,5), width = 3.7, unit = "cm") %>%
  width(j = 1, width = 3.2, unit = "cm")

set_caption(
  tab2,
  caption = "Posterior means and 95% credible intervals of the fixed effects estimated by the MDHGLM of predator speed, prey speed, and predator hunting success.",
  style = "Table Caption"
)

```

At the individual level, we detected differences in the mean movement speed among predators (i.e. the standard deviation of the mean speed for the predator ID; Table 3). These differences largely remained stable to the intermediate stage and then increased at the advanced stage to a level higher than when predators were novice (Table 3 and Appendix S1: Figure S4). For the dispersion part of the model, predators displayed considerable differences in their degree of hunting specialization, which also increased with experience (i.e. the standard deviation of sigma for the predator ID increases with experience; Table 3 and Appendix S1: Figure S4). Thus, the predator population is composed of both specialist and flexible individuals, and they further distinguish themselves as specialist/flexible hunters as they gain experience (Figure 2).

```{r table3, ft.align = "left"}

tab3 <- readRDS(here::here("outputs", "05_outputs_tables", "05_table3.rds"))

tab3 <- autofit(tab3)

tab3 <- tab3 %>% 
  footnote(
    i = 1, j = 1,
    part = "header",
    value = as_paragraph(
      "* We exponentiated the dispersion parameters (i.e. sigma) which are estimated on a log scale. All the reported values are standard deviations."),
    ref_symbols = " "
  ) %>%
  font(fontname = "Times New Roman", part = "all") %>%
  width(j = c(2,3,4,5), width = 3.7, unit = "cm") %>%
  width(j = 1, width = 3.2, unit = "cm")

set_caption(
  tab3,
  caption = "Posterior means and 95% credible intervals of the random effects estimated by the MDHGLM of predator speed, prey speed, and predator hunting success.",
  style = "Table Caption"
)

```

As we predicted, predators differed in the mean speed of the prey that they encountered. Thus, some individuals encountered prey that were on average slower, while others encountered prey that where on average faster throughout the study period (i.e. the standard deviation of the mean prey speed for the predator ID; Table 3). These differences were greater when predators reached an advanced level of hunting experience (i.e. the standard deviation of the mean prey speed for the predator ID was higher at the advanced stage; Table 3 and Appendix S1: Figure S4). In addition, individuals experienced largely distinct degrees of variability among their encounters with the prey. Hence, some predators experienced stable/predictable encounters with their prey, while others experienced unstable/unpredictable encounters with their prey throughout the study period (i.e. the standard deviation of sigma prey speed for the predator ID; Table 3).

```{r fig2, out.width = "100%", fig.cap = "**Figure 2.** Individual behavioural distribution of the predators' speed drawn from the MDHGLM estimates for individuals that had (A) the greatest increase in specialization and (B) the greatest increase in flexibility. The background (gray) distributions are for when individuals were novice hunters, and the foreground (blue) distributions with solid contour lines are for when they were advanced hunters. Both figure panels are ordered by ascending degree of increase in either specialization or flexibility."}

knitr::include_graphics(here::here("outputs", "05_outputs_figures", "05_figure2.png"))

```


## Relationship between behavioural specialization and prey variability

At all experience levels, predators that were on average faster (mean) also had a lower intra-individual variability (IIV) across their matches (Figure 3 and Appendix S2: Table S1). Thus, faster predators specialized at travelling fast, while slower predators were more flexible in their movement through time. In general, predators that encountered prey that were on average faster (mean) tended to be faster (mean) (Figure 3 and Appendix S2: Table S1). At the three experience levels, there were only weak correlations between predator IIV and mean prey speed (Figure 3 and Appendix S2: Table S1). However, predators that experienced more predictable encounters with their prey (IIV) specialized in a faster hunting tactic (IIV) (Figure 3 and Appendix S2: Table S1). For all the results described above, the correlations strengthen as predators gain experience (Figure 3 and Appendix S2: Table S1).

The foraging strategies of predators, that is, the correlations between the mean and IIV of speed, remained structurally stable among the levels of experience (Figure 3 inside the black squares and Appendix S2: Table S1). For example, novice predators that tended to be faster maintained this strategy as they gained experience (Figure 3 inside the black squares and Appendix S2: Table S1). Overall, we detected the same patterns as those from the within-experience state correlations described above. The correlations between trait values were also stronger among novice-intermediate and intermediate-advanced states than between novice-advanced states, indicating that the hunting strategies of predators were more similar among experience levels closer in time (Figure 3 inside the black squares and Appendix S2: Table S1).

```{r fig3, out.width = "100%", fig.cap = "**Figure 3.** Full correlation matrix of the MDHGLM relating the mean and intra individual variability (IIV) in speed of the predators, the mean and IIV in speed of the prey they encountered, and mean hunting success. Starting from the upper part of the plot are displayed the five parameters for novice predators (gray), the five for intermediate predators (yellow), and the five for advanced predators (blue). Larger dark blue circles indicate stronger positive correlations, while larger dark red circles indicate stronger negative correlations. The black squares indicate correlations between different experience levels (i.e. character states)."}

knitr::include_graphics(here::here("outputs", "05_outputs_figures", "05_figure3.png"))

```


## Hunting success of behavioural specialists vs generalists

We did not detect strong correlations between the predators' mean speed and their hunting success (Figure 3 and Appendix S2: Table S1), nor between the predators' IIV in speed and their hunting success (Figure 3 and Appendix S2: Table S1), suggesting that slower/flexible and faster/specialist predators were both equally successful. However, when predators were novice, there was a strong negative correlation between the mean speed of the prey that they encountered and their hunting success (Figure 3 and Appendix S2: Table S1). Hence, novice individuals that encountered faster prey were less successful. This relationship was decoupled at the later experience levels, such that encounters with faster prey at intermediate and advanced stages were not as strongly correlated with hunting success anymore (Figure 3 and Appendix S2: Table S1). Thus, the consequences of hunting faster prey were reduced at greater experience levels.




# DISCUSSION

Hunting experience is predicted to increase predator foraging specialization when resources are predictable [@Estes.etal2003;@Tinker.etal2008;@Tinker.etal2009]. However, when resources vary, others predict that learning with experience should increase behavioural flexibility [@Stephens1993;@Ishii.Shimada2010;@Mery.Burns2010;@Snell-Rood2013;@Wright.etal2022]. Our results show that both mechanisms operated simultaneously, such that there was no directional increase in behavioural specialization or plasticity in the population. Instead, the consequences from experience appear to be a property of individuals, such that each predator developed, through extensive practice, their own expertise and behavioural trajectory; some specialized at fast-paced hunting, while others adopted a slower and more flexible tactic. The predators' tactics were matched to prey encounters, such that specialized cursorial hunters experienced more predictable encounters, while slower and flexible hunters experienced more unpredictable encounters, with no difference in success between the two predator-types. This predator-prey behavioural matching grew stronger with predator experience, while the relationship between the prey's behaviour and hunting success diminished. Together, our observations suggest that predators adjust their hunting tactic with experience, and the degree at which they specialize in it, to the behaviour of the prey that they encountered throughout their lifetime in the game. Moreover, the predator-prey behavioural escalation through experience suggests that learning may be a catalyst for arms races.

## The development of expertise with hunting experience

Empirical research in humans and animals shows that task proficiency often increases nonlinearly with experience and stabilizes at an expert level [reviewed in @Dukas2019]. However, these results are derived from models that assume the same increase in expertise for each individual, and the data from these studies does not include repeated measures of individual success through time. In contrast, our analyses revealed that there was no population increase in expertise; instead, individual predators in *DBD* displayed distinct patterns of expertise acquisition. For instance, many predators increased their success (Appendix S1: Figure S1A), but others displayed a decrease in success (Appendix S1: Figure S1B) or no change in success at all with experience. We predicted that this would occur because predators should differ in the type of prey that they encounter, as some may be easier to capture than others. This is often the case in nature as prey can use variety of defenses such as physical armaments, toxins, camouflage, or antipredator behaviours to escape predation [@BrodieIII.BrodieJr.1999;@Bowen.etal2002;@brodieCoEvolutionPredatorsPrey2010;@Nomura.etal2011;@Carey.Wahl2011]. However, prey speed in our study did not shape individual differences in expertise acquisition by predators, even if predators differed in the prey that they encountered. This was unexpected, because prey speed is an important predictor of predator success in this system as well as in others [@Walker.etal2005;@Kelley.Magurran2011;@FraserFranco.etal2022]. Despite that other antipredator tactics may mediate these individual responses by predators, it is likely that individual differences in motivation and perseverance, attention span, or memory retention were also major causes [@Warburton2003;@morand-ferronStudyingEvolutionaryEcology2016;@Dukas2019]. For instance, a persevering predator may increase its success much more steadily than an unmotivated predator that quickly abandons a chase. Another factor that may explain differences in the development of expertise is the time delay between hunting events. For example, a predator that played 300 matches in the span of six months might forget more critical information (e.g. prey escape patterns or muscle memory) than one that played 300 matches in the span of 6 days. While this has not been formally tested, a greater delay between exposure events is hypothesized to attenuate or even negate the relationship between cumulative experience and success [@Endler1991;@Wright.etal2022].

## Changes in individual hunting specialization with experience and consequences for predator-prey interactions

The predator population displayed an increase in foraging flexibility when reaching the intermediate level of experience. As it reached an advanced level of experience, it returned to a level of flexibility that was similar to novice levels. This is commonly observed in juvenile predators across the animal kingdom, because exploring and learning different tactics at this developmental stage is crucial to become a skillful hunter [@Vehanen2003;@Johnson.Wilbrecht2011;@Thiers.etal2014;@deGrissac.etal2016]. Thus, the predators in *DBD* were probably exploring and refining different tactics at this stage of their development in the game. Interestingly, individuals became increasingly distinct in their level of foraging specialization with experience, which was related to the degree of variability in prey encounters. Predators that experienced predictable encounters with their prey specialized in hunting at high speeds, while those that experienced less predictable encounters adopted a slower and flexible strategy. This is similar to other studies finding that fast-paced hunting is a highly specialized tactic suited for prey that use rapid escapes [@Endler1991;@Bro-Jorgensen2013;@Wilson.etal2018;@Szopa-Comley.Ioannou2022]. On the contrary, instead of focusing solely on one tactic, predators that experienced unpredictable encounters probably adjusted their behaviour to minimize the consequences of uncertainty. Importantly, 13% of the predator population displayed the greatest (i.e. > than 0.2 standard deviations) change in foraging specialization/flexibility with experience, while 43% remained relatively stable, and the remaining 56% displayed lower changes. Thus, while individual differences in specialization did increase with experience, they were in part driven by a proportion of the population that displayed greater changes in behaviour compared to others. 

As they gained experience, predators increasingly matched their tactic to their prey, suggesting that they learned how to hunt via repeated interactions. However, while the mean speed of predators was strongly and increasingly matched to the mean speed of the prey, further investigations revealed that this apparent increase was driven largely by one individual. Yet, predators also adjusted their degree of flexibility to their prey even if the change was not very strong (Figure 3 and Table S1). In that regard, despite that only a portion of the population displayed large changes in specialization, and that adjustments to the prey were not as strong as we expected, our results still provide direct evidence that the mechanism underlying the resource-predictability hypothesis may indeed involve predators learning to adjust their degree of specialization based on their prey [@Weimerskirch.etal2005;@Weimerskirch2007;@Woo.etal2008;@Phillips.etal2017]. This is further supported by the fact that specialist and flexible hunters both achieved similar success throughout the study period.

An emerging pattern reported in predator-prey research is that predators and prey often match their phenotype to one another (i.e. positive trait covariances), which appears to be driven by an arms-race-like reciprocal phenotypic plasticity [@Kishida.etal2006;@Kishida.etal2009;@Edgell.Rochette2009a;@Mougi.etal2011;@McGhee.etal2013]. From an evolutionary perspective, @BrodieIII.BrodieJr.1999 showed in the garter snake (*Thamnophis sirtalis*) - roughskin newt (*Taricha granulosa*) system that such escalations may occur when prey develop defensive traits, which leads to stronger selection in predators, resulting in counteradaptations that circumvent the prey's defenses. In our system, the predator's success is negatively correlated with the prey's speed, which is an effective antipredator tactic [@FraserFranco.etal2022]. However, the current study showed that as the covariance between predator speed and prey speed increased with experience, reminiscent of an arms race, we found that the consequences of hunting faster prey decreased with experience. Moreover, this pattern was followed by a decrease in among individual variation in success with experience. This has important implications for the role of experience on predator-prey interactions, as we found that learning enables predators to effectively develop countermeasures to the prey's defenses within their lifetime (i.e. at nonevolutionary timescales). It also provides empirical evidence for the hypothesis that reciprocal phenotypic plasticity through learning may attenuate selection exerted by prey on predators [@Anderson1995;@Ancel1999;@Borenstein.etal2006;@Paenke.etal2007].

## Conclusions

The interactions of predator and prey traits are probably the most important processes involved in population cycles and are expected to occur when predators match their phenotype to their prey [@abramsEvolutionPredatorPreyInteractions2000]. Yet, its has remained largely unknown whether this matching results from predators learning how to capture their prey, in part because of the challenges of investigating direct interactions in the wild. By capitalizing on a virtual predator-prey system where we could directly monitor interactions, we found that experience drives individual specialization, and that predators adjust their behaviour to their prey. Moreover, individuals displayed large differences in the development of their expertise, which could result from differences in learning, as we found that almost half the population did not change their behaviour with experience. Our results have implications for predator-prey models of trait-matching, because such models are often studied at evolutionary timescales. Therefore, future studies should incorporate individual variation in learning and prey encounters to better predict under which ecological contexts specialization should be favoured over flexibility. Lastly, virtual systems are increasingly recognized among ecologists as effective systems to test hypotheses on consumer-resource interactions [@Barbe.etal2020;@Beauchamp2020;@Cere.etal2021;@FraserFranco.etal2022], but also in other fields such as citizen science and conservation [@Sandbrook.etal2015;@Redpath.etal2018;@Duthie.etal2021]. We therefore hope that our study will inspire more collaborations between scientists and the videogame industry to tackle fundamental questions in ecology.




```{r eval = FALSE}

*duckworth en tete*

Contrary to Hanifin et al. 2008, we find a directional symmetry (i.e. trait matching).

In abrams 2000, we read : "The interaction of predator and prey traits in determining capture rate seems to be the most important factor determining the stability of the entire system. Most studies in which cycles are a commonly observed outcome assume that the predator maximizes its rate of capture of the prey by matching the prey's phenotype"
We can also read : "If there is sufficiently strong stabilizing selection based on the costs of extreme trait values in both species, then stable equilibria are likely"

In Reimche et al. 2020 : in the discussion we can read that we still dont understand the factors driving phenotypic (mis)matching. In my case, it appears that learning may play a role.
Revoir mes résultats dans le cadre des résultats de Glaudas et al. 2019. Les 2 concordent bien.

Voir Miszei comme exemple parmi dautres pour trait matching.

check Mougi etal. 2011 for arms-races based on phenotypic plasticity (modèle théorique)

voir Edgell : prey-induced plasticity leads to covariance between predator-prey trait

**garder en tête l'étude de Lima AmNat sur purposeful unpredictability**
**Iannou also found strong among individual differences in slopes of trial number**


# Some caveats

"différences entre individus dans les proies rencontées : la direction peut être des 2 côtés, soit c'est parce que le prédateur drive le fait que les proies sont plus variables en général. Ou c'est parce qu'il rencontre des proies variables et donc il adopte cette stratégie."

"parler de matchmaking pourrait influencer courbes (moins de variance intermediare car proche de la moyenne de skill)"

"faire la distinction que certains optimisent, certains sont moins bon, donc ça varie dans la population."

"covariance est drivé par un individu pour la moyenne"


À faire :

- parler du sampling et du modèle pour tester les biais dans les méthodes [done]
- dans mon dernier paragraphe, parler du fait que les proies aussi s'ajustent

Phrases de conclusion :

Début de la conclusion, revenir brièvement sur notre système et les jeux. Les petits avantages

Our results also have implications also for predator-prey models of trait-matching, because such models are usually studied at the evolutionary scale.

Therefore, our results have important implications for future predator-prey models, which should incorporate individual variation in learning and prey encounters to better predict under which ecological contexts specialization should be favoured over flexibility. ---> pour la conclusion

```




# AKNOWLEDGEMENTS

...




# CONFLICT OF INTEREST STATEMENT

The authors declare no conflict of interest




# REFERENCES {.unnumbered}

<div id="refs"></div>

