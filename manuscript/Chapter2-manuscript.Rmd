---
title: "Hunting experience shapes individual foraging specialization and predator-prey interactions in an online videogame"
output: 
  word_document:
    reference_docx: Chapter2-styles.docx
    fig_caption: yes
bibliography: references2.bib
csl: ecology.csl
---

```{r setup, include = FALSE}

knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)

library(data.table)
library(brms)
library(flextable)
library(officer)
library(dplyr)

```

```{r}

path <- file.path(here::here(), "data")

dat <- fread(
  file.path(path, "FraserFrancoetal2023-data.csv"),
  select = c("timestamp", "match_id", "realm_id",
             "environment_id", "avatar_id", "predator_id",
             "game_duration", "total_xp_pred", "cumul_xp_pred",
             "hunting_success", "pred_speed", "prey_avg_speed"))

dat[, c(2:6) := lapply(.SD, function(x) as.factor(x)), .SDcols = c(2:6)]

# To have a date column
dat[, date := as.POSIXct(sub(" .*", "", timestamp))]

```

Journal name : Ecology 

Manuscript type : article

Authors : Maxime Fraser Franco^1^, Francesca Santostefano^1,2^, Julien G. A. Martin^3^, Clint D. Kelly^1^, Pierre-Olivier Montiglio^1^ 

Affiliations : ^1^ Département des Sciences Biologiques, Université du Québec à Montréal, Montréal, QC, Canada. ^2^ Centre for Ecology and Conservation, Penryn Campus, University of Exeter, Cornwall, United Kingdom. ^3^ Department of Biology, University of Ottawa, Ottawa, ON, Canada. 

Corresponding author : fraser_franco.maxime@courrier.uqam.ca 

Authorship statement : With MFF as the leader, all authors participated in conceiving the ideas behind the study. MFF prepared the data, conducted the analyses, and wrote the manuscript with input from all coauthors. All authors reviewed and accepted the final version of the manuscript.

Open research statement : The data and code used to produce the results in this manuscript are freely available on GitHub https://github.com/quantitative-ecologist/experience-hunting-tactics

Keywords: foraging behaviour, reciprocal behavioural plasticity, learning, antipredator behaviour, virtual ecology




\newpage
# ABSTRACT {.unnumbered}

Many predator-prey systems are driven by reciprocal interactions where one responds to changes in the behaviour of the other. However, the mechanisms driving these individual responses are only beginning to be explored, in part because of the challenges associated with monitoring direct predator-prey interactions. In this study, we used a virtual predator-prey system (the online game *Dead by Daylight*) to test how hunting experience shapes individual foraging specialization and success in predators across repeated interactions with their prey. With increasing experience, predators fine-tuned their tactics to the behaviour of their prey. Individuals that adopted a flexible tactic (i.e. generalists) encountered groups of prey with varying speeds, and those that adopted a cursorial and specialized tactic (i.e. specialists) encountered groups of prey with similar speeds throughout the study period. Our results suggest that experience enables predators to learn how to optimize their tactics to the type of prey that they encounter (i.e. fast or slow), which may act as a stabilizing mechanism promoting behavioural diversification in predator-prey systems.




\newpage
# INTRODUCTION {.unnumbered}

Individual variation in predator foraging behaviour is increasingly recognized as a major driver of trophic interactions and community dynamics [@Griffen.etal2012;@Michalko.Pekar2016;@Moran.etal2017;@Michalko.etal2021]. Indeed, predator populations often comprise assemblages of individuals specializing in different foraging tactics, with consequences for habitat use, functional responses, prey choice, and foraging rate [@Kobler.etal2009;@toscanoTraitmediatedFunctionalResponses2014;@Patrick.Weimerskirch2014;@Matsumura.Miyatake2022a]. Despite the clear evidence that individual specialization is important for predator-prey interactions, its underlying mechanisms remain surprisingly unclear. However, it has recently been suggested that reciprocal interactions between predators and prey could drive individual foraging specialization [@Araujo.etal2011;@toscanoPersonalityForagingBehavior2016;@DeLisle.etal2022]. For instance, predators often hunt using techniques that are fine-tuned to the type of prey that they encounter [@Estes.etal2003;@Woo.etal2008;@Courbin.etal2018], and their refinement is crucial for young predators to reach adulthood and survive [@Phillips.etal2017;@Heithaus.etal2018]. Thus, the capacity of predators to effectively use hunting tactics should be contingent on periods of extensive practice (i.e. experience), which may result in different foraging specializations.  

Theory predicts that foraging specialization may emerge via learning and expertise acquisition [@Tinker.etal2009;@Dukas2019]. @Dukas2019 defines expertise as the characteristics, skills, and knowledge allowing individuals with extensive experience to outperform novices on complex tasks. It is described as the relationship between success and experience, where extensive practice optimizes success when individuals reach an advanced level of experience. Empirical studies on human and non-human hunters show that experience optimizes foraging efficiency (e.g. search and handling times, return rates) potentially via associative images or reliance on prey and environmental cues [@Edwards.Jackson1994;@Morse2000;@MacDonald2007;@Reid.etal2010;@Wilson-Rankin2015]. This body of work suggests that such optimization may thus promote individual foraging specialization (e.g. repeatedly using fast attacks) if the success of a tactic is constant through time. It may also be costly to test different tactics by trial and error when prey are scarce or unpredictable. Alternatively, the costs/risks faced by hunters when switching tactics may be offset through extensive practice, as individuals gain experience and information on their prey, leading to increased individual foraging flexibility [@Stephens1993;@Ishii.Shimada2010;@Mery.Burns2010;@Kelley.Magurran2011;@Snell-Rood2013]. To develop proper responses to fluctuating resources, individuals would need to sample their environment broadly during an extensive period of time, leading to greater performance at later stages of development [reviewed in @Snell-Rood2013]. However, predators can differ in the challenges that they face during their lifetime, which could result in both processes (i.e. specialization and flexibility) operating at the same time within a predator population. For instance, some individuals may hunt in habitats where prey are faster, which are often proven to be more difficult to hunt [@Walker.etal2005;@Kelley.Magurran2011;@Martin.etal2022]. It should thus be essential for predators to learn how to match their tactic to their prey to optimize their success.

There is currently a lack of consensus on the fitness advantages of specialized vs flexible foraging [@Phillips.etal2017]. This is reflected in the literature showing contrasting results in the links between specialization and fitness. Some studies report greater benefits when specializing [@Pintor.etal2014;@Patrick.Weimerskirch2014a;@vandenBosch.etal2019], some report that flexible foraging has greater benefits [@Paull.etal2012;@Santoro.etal2019;@Manlick.etal2021], and others find equal benefits depending on timescales [@Woo.etal2008;@Potier.etal2015]. This may in part be due to the limited information we have on the ecological contexts favoring specialization over flexibility. However, in predator-prey systems, studies suggest that fluctuations in the predictability of resources throughout a predator's lifetime may be a key factor shaping foraging specialization [@Weimerskirch2007;@Woo.etal2008;@Phillips.etal2017;@Courbin.etal2018]. It is hypothesized that when resources are predictable (or stable), individual specialists should have higher capture rates by reducing the energy and time required to search for and handle prey. In contrast, individual generalists should benefit from adjusting to fluctuating resources by reducing the consequences of uncertainty. While it is clear that predators can match their behaviour and locomotion to their prey [@McGhee.etal2013a;@Bro-Jorgensen2013;@Chang.etal2017;@Szopa-Comley.Ioannou2022], the important question remaining is how? Given the dynamic nature of predator-prey interactions, it is unlikely that evolution alone could explain such behavioural adjustments by predators, because complex hunting strategies require practice to be effective [@Kelley.Magurran2011]. Thus, uncovering the role of learning during direct predator-prey interactions would help in better predicting the behavioural decisions and the success of predators when they are hunting.

A recurring challenge impeding research on predator-prey behavioural interactions, at the individual level, is the need to collect data simultaneously on both the predator and prey. We recently demonstrated, using an online predator-prey videogame called *Dead by Daylight* (*DBD*), that virtual systems can overcome this challenge [@FraserFranco.etal2022]. In this dynamic virtual system, four prey players need to forage for resources while avoiding a predator player. The prey can contribute to the group's success by healing or helping others escape the predator, or be selfish and attempt to escape by themselves [@Cere.etal2021]. The predators' hunting tactics and success are driven by the movement of the prey [@FraserFranco.etal2022]. Predators should thus benefit from learning how the prey behave to be successful. Other virtual predator-prey studies show that predation regimes drive individual variation in risk perception [@Beauchamp2020], that familiarity between prey has a positive indirect effect on survival [@Cere.etal2021], and that prey face contrasting natural and social selection regimes (Santostefano et al. in prep). These examples outline how virtual systems could be useful in identifying general ecological patterns, which might in turn help to advance the current gaps in predator-prey research. They also generate large volumes of data on interacting players throughout their lifetime in the game under realistic ecological scenarios. Hence, virtual systems offer the opportunity to tackle fundamental questions about the role of experience on predator-prey interactions. 

In this study, we test how hunting experience shapes predator foraging specialization using data from players in the online videogame *Dead by Daylight*. *DBD* simulates a direct predator-prey interaction, where one predator player hunts four prey players in different virtual environments. The data grants a high degree of precision on the behavioural interaction, as the behaviour of both the predator and the four prey along with the predator's success are monitored simultaneously in each trial. First, we investigate how predators develop their individual hunting expertise. We hypothesize that predators should differ in the development of their expertise, partly because they encounter varying levels of difficulty with the prey that they pursue. For example, a predator may face greater difficulty than other individuals if it more often encountered groups of prey that were elusive. Second, we test the hypothesis that experience will shape foraging specialization. If experience reduces the costs of switching between hunting tactics, we predict that the predator population should become more flexible. Alternatively, if experience enables the refinement of the hunting tactics, then the predator population may instead specialize. Otherwise, if both processes operate at the same time, then we should see no change with experience at the population level, but differences in specialization among individuals should increase. Third, we evaluate how predator foraging specialization emerges from behavioural interactions with the prey. We expect predators that experienced more predictable encounters with their prey to specialize, while predators that experienced unpredictable encounters with their prey should adopt a flexible hunting tactic. If we detect such prey-dependent fine-tuning, then specialist and flexible hunters should attain equal success because both should have learned to optimize their hunting style to their prey.




# MATERIALS AND METHODS {.unnumbered}


## Study system

*DBD* is a survival asymmetric (i.e. a game where the gameplay mechanics differ between two groups) multiplayer online game developed by Behaviour Interactive Inc, in which players can play either as a predator or a prey. The objective of the predator is to hunt and capture the four prey across a virtual environment. The objective of the four prey is to search for resources while avoiding the predator. The resources are in the form of power generators that, once all activated, will enable the prey to escape through one of two exit doors. The composition of the predator and prey group in a match is determined by a skill-based matchmaking algorithm. A match ends when the predator kills all the prey available (i.e. that have not escaped), or when the last remaining prey escapes the virtual environment. Each player, predator or prey, can choose an avatar with abilities that encourage specific play styles (e.g. bold vs cautious prey, or ambush vs roaming predator). During our study period, the game offered `r toString(format(length(unique(dat$avatar_id))))` predator avatars. The virtual environments are composed of fixed and procedurally generated habitat components, such as vegetation, mazes, and buildings. Some of these environments are larger than others, with varying structural complexity. However, predators display only minimal changes in behaviour and hunting success across the environments, probably due to a game feature enabling them to have visual cues of the generators [@FraserFranco.etal2022]. There were `r toString(format(length(unique(dat$environment_id))))` virtual game environments available for play during the study period.


## Data collection

The videogame company provided data that spanned a period of 6 months of gameplay recorded for every player. The first recorded match was played on `r toString(format(min(dat$date)))` and the last one on `r toString(format(max(dat$date)))`. We analyzed only matches where players did not know each other (i.e. "Online" mode). We filtered any matches where players were inactive, such as when speed values were equal to, or very close to, zero. Moreover, we used our knowledge of the game to remove any matches where players were potentially hacking, or not playing the game as it is supposed to be played. We then sampled players that played 300 matches or more, and monitored all their matches from the first to a maximum of 500 matches.

Our population consists of `r toString(format(length(unique(dat$predator_id))))` predator players with a total record of `r toString(formatC(length(unique(dat$match_id)), big.mark = " "))` matches. The predator-players' experience varied between `r toString(format(min(dat$total_xp_pred)))` and `r toString(format(max(dat$total_xp_pred)))` matches played. These matches lasted between `r toString(format(round(min(dat$game_duration / 60))), digits = 2)` and `r toString(format(round(max(dat$game_duration / 60))), digits = 2)`-min (mean = `r toString(format(round(mean(dat$game_duration / 60))), digits = 2)`-min). The following information is collected and reported for every match : the player's anonymous ID, its avatar (i.e. the predator character chosen with its specific skill-gameplay mechanics), the game environment, the predator-player's experience along with its speed, and the average speed of the group of prey it encountered.

We analyzed the predator's average speed and the average speed of the prey group encountered by the predator. The predator's average speed is measured as the average distance traveled per second during a match ($\overline{x}$ = `r toString(format(round(mean(dat$pred_speed), digits = 2), nsmall = 2))` ± `r toString(format(round(sd(dat$pred_speed), digits = 2), nsmall = 2))` m/s). We measured the preys' average speed as the average travel speed of the four individual prey within a match ($\overline{x}$ = `r toString(format(round(mean(dat$prey_avg_speed, na.rm = T), digits = 2), nsmall = 2))` ± `r toString(format(round(sd(dat$prey_avg_speed, na.rm = T), digits = 2), nsmall = 2))` m/s). We defined hunting success as the number of prey consumed during the match (min = `r toString(format(min(dat$hunting_success)))`, max = `r toString(format(max(dat$hunting_success)))`). Lastly, we defined the predator's cumulative experience as the number of matches played prior to the match being monitored. For example, the first match of a player would have a cumulative experience value of 0, while the tenth match would have a value of 9.

We recognize that we could have introduced a bias in our analyses since we sampled individuals who stayed in the game for at least 300 matches. For instance, these players may already be used to play videogames, and thus, could differ in the way they play at early stages of their experience in the game. To ensure that our sample was not biased, we compared a random sample of players that played between 20 and 50 matches, between 51 and 100 matches, and between 101 and 300 matches from the same timeframe with our sampled population. We then took the first 20 matches played by these players, including those from our sampled population, and compared their average behaviour using a Bayesian hierarchical linear model. We found that neither of the four groups differed in their average speed (Appendix 2: Table S1-S2), which gives us confidence that our player population was not biased.


## Statistical analyses 

### Software and computer specifications

All our statistical analyses were executed on Cedar (https://docs.alliancecan.ca/wiki/Cedar), a computer cluster maintained by the Digital Research Alliance of Canada. The operating system for Cedar is CentOS Linux 7. The models were fitted in R (version 4.1.2) using Markov chain Monte Carlo (MCMC) sampling with the package "brms" version 2.16.3 [@Burkner2017], an R front-end for the STAN software [@StanDevelopmentTeam2023], and "cmdstanr" version 0.4.0 [@Gabry.Cesnovar2021] as the back-end for estimation (cmdstan installation version 2.28.2).

### Effect of experience on hunting success

We tested whether predators varied in the development of their expertise by computing five Bayesian generalized additive mixed models (GAMM) with thin plate regression splines, all of which estimated the relationship between hunting success (i.e. number of prey captured) and the predators' cumulative experience (i.e. number of matches played before the current match). We parametrized the models following the method of @Pedersen.etal2019. The first model was the simplest, with a common global smoothing function and random intercepts for the predator ID. In this model, we assume that individuals have the same development of expertise, with the model estimating a trend for the average individual (i.e. global smoother). For the second model, we included varying group-level smoothers for the predator ID. In this model, we assume that individuals share a similar relationship between success and experience, but that this relationship can vary (e.g. individual 1 has a steeper curve than individual 2). This enabled us to test whether predators differed in the development of their expertise. In the third model, we kept the group-level smoothers for the predators, but removed the global smoother. This allows each individual to have a unique relationship between success and experience without penalization by the global smoother. This model assumes that predators do not share a common relationship between success and experience. The fourth and fifth models were a reproduction of the second and third models respectively, where we included the prey group's average speed to assess its effect on the relationship between success and experience. We included match duration as a covariate in all five models.

We computed the five models using a modified version of the beta-binomial distribution implemented in "brms". Hunting success was estimated as the probability of capturing the four prey ($\mu_i$), drawn from a Beta distribution ($Beta(\mu_i, \phi)$) with mean ($\mu \in [0,1]$) and precision ($\phi > 0$) parameters. We used a logit link function to estimate $\mu_i$ where $\mu_i = \frac{exp(\eta_i)}{exp(\eta_i) + 1}$ and $\eta_i$ is the linear predictor, while the precision parameter ($\phi$) was estimated with an identity link. We used the default number of basis functions (K) in "brms" for the models to estimate the relationship between hunting success and experience. We assumed that the random intercepts for the predator ID ($id$) followed a Gaussian distribution with estimated standard deviation ($id \sim N(0,\ I\ \sigma_{id})$). We used weakly informative Gaussian priors for the intercept ($N(0,\ 0.5)$) and the global trend of cumulative experience ($N(0,\ 2)$). Based on previous results [@FraserFranco.etal2022], we defined a positive Gaussian prior on the precision parameter ($N(2,\ 0.5)$), a positive Gaussian prior ($N(1,\ 0.5)$) on the game duration because longer trials lead to greater success, and a negative Gaussian prior on prey speed ($N(-1,\ 0.5)$) because encountering faster prey is associated with lower success in this system. We employed weakly informative half-Gaussian priors on all the standard deviation parameters ($N(0, 0.5)$). We compared the models' predictive accuracies using approximate leave-one-out cross-validation with Pareto-smoothed importance sampling [@Vehtari.etal2017;@Piironen.Vehtari2017;@Vehtari.etal2022].

### Changes in foraging behaviour and predator-prey interactions with experience

We categorized predators by their experience based on the number of matches they played. Since we monitored all predator players throughout their experience, they appeared in all of the three following experience categories. First, we assigned predators the status of "novice" when they had a cumulative experience below 100 matches. For example, a predator player that played 500 matches in total would be labelled as a novice in its first 100 matches. Following this logic, we labelled predators as "intermediate" hunters when they had a cumulative experience between 100 and 299 and matches. Lastly, we defined predators as "advanced" hunters when they had a cumulative experience equal or above 300, with a maximum of 499 cumulated matches.

We tested whether foraging behaviour changed with experience, and compared the success of generalists vs specialists, using a multivariate, double-hierarchical generalized linear model (MDHGLM) [@Lee.Nelder2006;@Cleasby.etal2015;@Mitchell.etal2016a]. For each level of experience (i.e. novice, intermediate, advanced), the model estimated the mean speed of every individual (which we call the mean part of the model), and the intra-individual standard deviation of speed of every individual (which we call the dispersion part of the model). From the mean part of the model, we could infer on among individual differences in foraging tactics (i.e. along the slow-fast continuum), while in the dispersion part of the model, we could infer on among individual differences in foraging specialization (i.e. intra-individual variability, IIV). We followed the same structure for the preys' speed. For the mean part, we tested whether individual predators differed in the average speed of the groups of prey encountered across the study. For the dispersion part, we tested whether individual predators differed in how (dis)similar were the groups of prey they encountered across the study (i.e. if resource heterogeneity was higher for some individuals compared to others). We controlled for the square-root of the average rank of the prey group as proxy for prey skills for both the predator and the prey's speed (mean and dispersion). The ranking system in *DBD* was implemented by the company to pair players in a match based on their skill (https://deadbydaylight.fandom.com/wiki/Rank). For hunting success, we quantified among individual differences in mean prey capture and controlled for the square-root of the game duration.

The model estimated the correlation between the individual identity random effect on the mean and on the dispersion within each trait (e.g. $cor(\sigma_{id_{m}\ pred}\ \sigma_{id_{d}\ pred})$) and among each trait (e.g. $cor(\sigma_{id_{m}\ pred}\ \sigma_{id_{d}\ prey})$) within a level of experience. In the first case, this allows us to assess, for example, whether predators that are on average slower/faster are more specialized or flexible. In the second case, it enables us to estimate, for example, whether predators that adopted a slower/faster (or more specialized/flexible) tactic encountered prey that were faster/slower, or if slower/faster predators had lower/greater hunting success.

The full model has the following form, with each equation repeated three times (i.e. one for each level of experience):

```{r model_equations, ft.align = "left"}

# Prepare equations
eqs <- c(
  "speed_{pred} = X_{m}\\ b_{m} + M\\ env_{m} + N\\ av_{m} + Z\\ id_{m} + e",
  "log(\\sigma_{e,pred}) = X_{d}\\ b_{d} + Z\\ id_{d}",
  "speed_{prey} = X_{m}\\ b_{m} + M\\ env_{m} + N\\ av_{m} + Z\\ id_{m} + e",
  "log(\\sigma_{e,prey}) = X_{d}\\ b_{d} + Z\\ id_{d}",
  "success_{pred} = X_{m}\\ b_{m} + Z\\ id_{m} + e"
)
eqs_num <- c(
    "(eqn. 1.1)",
    "(eqn. 1.2)",
    "(eqn. 2.1)",
    "(eqn. 2.2)",
    "(eqn. 3)"
)

# Combine into a dataframe
df <- data.frame(
    formula = eqs,
    number = eqs_num
)

# Create a table to display on Word
ft <- flextable(df)

# Transform values as a mathematical formula
ft <- compose(
  x = ft, j = 1,
  value = as_paragraph(
    as_equation(formula, height = .5)
  )
)

# Customize table
my_theme <- function(x, ...) {
  x <- colformat_double(x, big.mark = " ",
                        decimal.mark = ".",
                        digits = 2)
  x <- border_remove(x)
  x <- delete_part(x, part = "header")
  x <- align(x, j = 1, align = "left", part = "body")
  x <- align(x, j = 2, align = "right", part = "body")
  x <- font(x, fontname = "Times New Roman", part = "body")
  x <- fontsize(x, size = 12, part = "body")
  x <- width(x, j = 1, width = 10, unit = "cm")
  x <- width(x, j = 2, width = 6.51, unit = "cm")
}

# Apply theme and print
ft <- my_theme(x = ft)
ft

```

where $env$, $av$, and $id$ are the vectors of random environment, random avatar, and random individual identity effects associated with their incidence matrices $M$, $N$, and $Z$. $b$ is the vector of fixed effects with its incidence matrix $X$. The $m$ and $d$ subscripts indicate that an estimate is from the mean or dispersion part of the model, respectively. On the mean part, we assumed that the game environment and avatar random effects followed a Gaussian distribution with estimated standard deviation ($env \sim N(0,\ I\ \sigma_{env})$ and $av \sim N(0,\ I\ \sigma_{av})$). $I$ is the identity matrix, with $I\sigma$ indicating that the random effects are independently and identically distributed. The residuals are assumed to follow a Gaussian distribution ($e \sim N(0,\ \sigma_{e})$). On the dispersion part, the residuals vary among individuals, allowing us to estimate among individual differences in specialization. The individual identity random effects on both the mean and dispersion parts follow a multivariate Gaussian distribution $[\begin{array}{cc} id_m \\ id_d \end{array}] \sim MVN(0,\ \Sigma_{id})$ where $\Sigma_{id}$ is a 15x15 variance-covariance matrix. The parameters $\sigma_{env}$, $\sigma_{av}$, and $\sigma_{id}$, correspond to the among environment, among avatar, and among individual standard deviations, respectively.

We parameterized equations 1.1 to 2.2 with a Gaussian distribution family (predator and prey speed) and used a beta-binomial distribution family for equation 3 (predator hunting success). We used weakly informative Gaussian priors for the prey rank ($N(0,\ 1)$: eqn. 1.1 to 2.2) and game duration ($N(0.5,\ 0.5)$: eqn. 3). Based on previous results showing that the mean predator speed revolves around 3 m/s [@FraserFranco.etal2022], we applied a weakly informative Gaussian prior on the intercept for predator and prey speed ($N(3, 0.5)$: eqn. 1.1 and 2.1). Similarly, we used a weakly informative Gaussian prior on the intercept for the dispersion part ($N(0,1)$: eqn 1.2 and 2.2). For hunting success, we applied a positive Gaussian prior on the precision parameter ($N(2,\ 1)$: eqn. 3) and a negative Gaussian prior ($N(-4, 1)$: eqn 3) on the intercept because hunting success should be close to 0 at the lowest game duration. For every predicted variable, we applied a weakly informative half-Gaussian prior ($N(0,\ 1)$) on the random effects for the mean part and the dispersion part of the model. We used a regularizing $LKJ(2)$ prior on the correlation matrix.

After inspection of the results, we found that key parameter values for our hypotheses were in the direction of our predictions, but they were largely driven by the very slow speed of one predator. Removing this individual reduced the estimates by a significant margin. To remain conservative, we thus present the results of the model without this individual in the main text, and provide the results of the model including it in the Appendix S3.

### Markov Chain Monte Carlo settings

We parametrized both the GAMMs and the MDHMLM to run four MCMC chains with 1000 posterior samples for each parameter. We ran 2500 iterations with a thinning set to eight for the additive model with a global smoother only (see Table 1), and 1500 iterations with a thinning set to four for the other additive models. We set the first 500 iterations in each model as warm ups. We parametrized the MDHGLM to run 2500 iterations with a thinning set to eight, with the first 500 iterations used as warm ups. We assessed the convergence of the MCMC chains using trace plots, R-hat diagnostics with a threshold of <1.01, and effective sample sizes (ESS) with a threshold of >100 [@Vehtari.etal2021a]. We also performed posterior predictive checks which showed an adequate fit of the models (for details, see https://github.com/quantitative-ecologist/experience-hunting-tactics).




# RESULTS {.unnumbered}

## Effect of experience on hunting success

Out of all five models, the two that best predicted the data, with an almost identical expected log pointwise density (elpd), were the models that controlled for the prey group's speed (Table 1). Predators differed substantially in the relationship between hunting success and cumulative experience (i.e. expertise: Figure 1A-B). For instance, the success of some predators steadily increased with experience (Figure 1B, Appendix S1: Figure S1A) while others showed a decrease in success with experience (Figure 1B, Appendix S1: Figure S1B). Overall, `r toString(scales::percent(191/253))` of the population displayed an >10% increase in hunting success, `r toString(scales::percent(37/253))` displayed a >10% decrease in hunting success, and the remaining `r toString(scales::percent(25/253))` had a lesser change in success ranging between -10% and +10%.

We predicted that the relationship between hunting success and experience would vary among predators because they should not encounter the same prey. After controlling for the mean speed of the prey group within a match, we did not find evidence confirming this prediction, because differences among predators remained important (Figure 1B). However, many individual curves appear to have shifted upwards in the model where we control for prey speed (Figure 1B) vs in the model where we do not control for prey speed (Figure 1A). Moreover, in the models where we did not account for prey speed, the global trend of predator experience was nearly flat (results not shown). Yet, we see that there is an increase up to 13% in the probability of capturing all prey with experience in the population when we account for prey speed (Figure 1C).


## Effect of experience on the development of behavioural specialization

The mean speed of the predator population did not change with experience (i.e. intercept of predator speed (mean); Figure 2 and Appendix S1: Table S1). There was also strong evidence that foraging specialization in the population remained stable across experience levels (i.e. intercept of predator speed (sigma); Figure 2 and Appendix S1: Table S1).

Individual predators differed slightly in their average movement speed, but differences did not increase at higher experience levels (i.e. predator ID (mean); Figure 2 and Appendix S1: Table S2). However, individuals displayed differences in their foraging specialization, with a 0.1 unit increase in standard deviation from novice to advanced (i.e. predator ID (sigma) is higher at the advanced level; Figure 2 and Appendix S1: Table S2). Thus, as individual predators gain experience, the population becomes slightly more heterogeneous along the specialist-flexible hunter continuum. Moreover, some individual predators switched from a flexible to a specialized hunting tactic, and vice-versa, as they gained experience (Figure 3). Importantly, 12.6% of the predator population displayed a large change in foraging specialization/flexibility with experience (i.e. $\ge$0.2 change in standard deviation), 44.7% displayed lower changes (i.e. >0.05 and <0.2 change in standard deviation), while 42.7% remained relatively stable (i.e. $\le$0.05 change in standard deviation).

Contrary to predictions, there was strong evidence that predators did not differ in the speed of the prey groups that they encountered on average (i.e. predator ID (mean); Appendix S1: Table S2). Moreover, differences in standard deviation values across experience were negligible (i.e. predator ID (mean); Figure 2). However, individuals differed in the heterogeneity of the groups of prey encountered across the study period (i.e. predator ID (sigma); Appendix S1: Table S2). Hence, some predators encountered prey groups with similar average speeds, while others encountered prey groups with varying average speeds throughout the study period. The differences in the prey encountered among predators increased only slightly with experience (i.e. predator ID (sigma); Figure 2).


## Relationship between behavioural specialization and prey behaviour

*continuer ici les modifications*

At all experience levels, predators that were on average faster (mean) also had a lower intra-individual variability (IIV; Figure 3 and Appendix S2: Table S1). Thus, faster predators specialized on fast movement, while slower predators were more flexible in their movement through time. Predators that were on average faster (mean) also encountered groups of prey that were on average faster (mean) (Figure 3 and Appendix S2: Table S1). At the three experience levels, there were only weak correlations between IIV in predator speed and mean prey speed (Figure 3 and Appendix S2: Table S1). However, predators that encountered groups of prey with similar speeds (IIV) specialized in their hunting tactic (IIV) (Figure 3 and Appendix S2: Table S1). Hence, predators that encountered groups of prey with similar average speeds were more specialized, while those that encountered groups of prey with different average speeds were more flexible. For all the results described above, the correlations strengthen as predators gain experience (Figure 3 and Appendix S2: Table S1).


## Hunting success of behavioural specialists vs generalists

We did not detect strong correlations between the predators' mean speed and their hunting success (Figure 3 and Appendix S2: Table S1), nor between the predators' IIV in speed and their hunting success (Figure 3 and Appendix S2: Table S1), suggesting that slower/flexible and faster/specialist predators were both equally successful. However, novice individuals that encountered groups of prey with faster speeds were less successful (Figure 3 and Appendix S2: Table S1). This relationship was decoupled at the later experience levels, such that encounters with faster prey at intermediate and advanced stages were not as strongly correlated with hunting success anymore (Figure 3 and Appendix S2: Table S1). Thus, the consequences of hunting faster prey were reduced at greater experience levels.




# DISCUSSION

*retravailler ici pour moins faire comme si il y avait un gros cluster. C'est surtout un continuum.*

*The maximum is attained around match 340 (i.e. advanced state). Prey speed was thus important in mediating the population and individual-level relationship between success and experience, but does appear to influence among individual differences in this relationship.*

Hunting experience is predicted to increase predator foraging specialization when resources are predictable [@Estes.etal2003;@Tinker.etal2008;@Tinker.etal2009]. However, when resources vary, others predict that learning with experience should increase behavioural flexibility [@Stephens1993;@Ishii.Shimada2010;@Mery.Burns2010;@Snell-Rood2013;@Wright.etal2022]. Our results show that there was no directional increase in either behavioural specialization or flexibility with experience at the population level. Instead, individual predators developed their own expertise and behavioural trajectory over successive encounters with prey; some specialized in fast-paced hunting, and others adopted a slower and more flexible tactic with experience. Specialized cursorial hunters encountered similar groups of prey while slower and flexible hunters encountered varying groups of prey, with both achieving similar success over the study period. With experience, predators increasingly matched their tactic to the speed of the prey that they encountered, which simultaneously relaxed the negative consequences of encountering faster prey. Together, our observations suggest that predators in *DBD* learn to adjust their hunting tactic to the behaviour of the prey that they encounter throughout their lifetime in the game.

## The development of expertise with hunting experience

Empirical research shows that task proficiency often increases nonlinearly with experience and stabilizes at an expert level [reviewed in @Dukas2019]. However, we cannot derive conclusions at the individual-level from these studies either because their models assume the same increase in expertise for each individual, or because it is unclear whether their data has repeated measures of individual success through time. Our analyses revealed that there was no population increase in expertise over time. As we mentioned before, the matchmaking pairs players using a rank-based system, and this result may thus be due to predators being paired with prey of similar skills. However, if this was solely due to the ranking system, we would have found a similar flat relationship for every predator. Instead, individual predators in *DBD* displayed distinct patterns of expertise acquisition (Figure 1, Appendix S1: Figure S1A-S1B). 

We predicted that this would occur if, by chance, predators differed in the prey that they encountered, because some may be easier and others more difficult to capture. In nature, prey can use a variety of defenses such as physical armaments, toxins, camouflage, or antipredator behaviours to escape predation [@BrodieIII.BrodieJr.1999;@Bowen.etal2002;@brodieCoEvolutionPredatorsPrey2010;@Nomura.etal2011;@Carey.Wahl2011]. In *DBD* we previously showed that faster movement is an effective strategy used by the prey to avoid predation [@FraserFranco.etal2022], and other studies have found that as well [@Walker.etal2005;@Kelley.Magurran2011;Martin.etal2022]. Yet, prey speed did not shape individual differences in expertise acquisition, but other antipredator tactics may be involved. For example, it is well known in *DBD* that some prey groups use mobbing to confuse the predator or prevent it from capturing an injured individual. However, like natural predator-prey systems, direct predator-mobbing in *DBD* is dangerous and requires coordinated actions that are learned through experience [@Graw.Manser2007;@Dutour.etal2016;@Pitman.etal2017;@Dutour.etal2019;@Szymkowiak2021], and was thus probably not a pervasive antipredator strategy. Other antipredator tactics known to confuse human and non-human predators during the attack sequence are unpredictable escapes and turning angles [@Jones.etal2011;@Briffa2013;@Herbert-Read.etal2017;@Moore.etal2017;@Richardson.etal2018]. While predators can adjust to unpredictable prey escapes [@Szopa-Comley.Ioannou2022], it could still be more arduous for a predator to learn and optimize its hunting success if it more often encountered prey using these tactics.
 
Alternatively, it is possible that individual variation in learning rates due to time delays between hunting events drove the observed differences in expertise acquisition, irrespective of the prey groups that predators encountered. For example, in *DBD*, a predator that played 300 matches in the span of six months might forget more critical information (e.g. prey escape patterns or muscle memory) than one that played 300 matches in the span of 6 days. While this has not been formally tested, a greater delay between exposure events is hypothesized to attenuate or even negate the relationship between success and experience [@Endler1991;@Wright.etal2022]. Moreover, the predators may have differed in their ability to detect prey. For example, it is widely demonstrated that predators learn visual cues such as coloration to recognize and avoid unpalatable prey [@Skelhorn.etal2016;@Ward-Fear.etal2020;@McLellan.etal2021], or habitat characteristics to locate food patches [@Ehlinger1989;@Hughes.etal1992;@Warburton2003]. @Szopa-Comley.etal2020 also found consistent among individual variation in the capacity to detect cryptic and conspicuous prey in three-spined sticklebacks (*Gasterosteus aculeatus*). Thus, individual predators should differ in their expertise if they do not learn equally how to exploit the visual cues that facilitate prey detection.

## Changes in individual hunting specialization with experience and consequences for predator-prey interactions

The predator population displayed an increase in foraging flexibility when reaching the intermediate level of experience. As it reached an advanced level of experience, it returned to a level of flexibility that was similar to novice levels. This is commonly observed in juvenile predators across the animal kingdom, because exploring and learning different tactics at this developmental stage is crucial to become a skillful hunter [@Vehanen2003;@Johnson.Wilbrecht2011;@Thiers.etal2014;@deGrissac.etal2016]. Thus, predators in *DBD* were probably exploring and refining different tactics at this stage of experience. Within the population, differences in individual foraging specialization among predators increased with experience, which was related to the degree of variability in prey encounters. Predators that encountered groups of prey with similar speeds across matches specialized in hunting at high speeds, while those that encountered varying groups of prey adopted a slower and flexible strategy. Fast-paced hunting is indeed a highly specialized tactic suited for prey that use rapid escapes [@Endler1991;@Bro-Jorgensen2013;@Wilson.etal2018], while a slower and flexible tactic can be useful to minimize the consequences of uncertainty when hunting prey that use unpredictable escapes [@Szopa-Comley.Ioannou2022]. This is further supported by the fact that specialist and flexible hunters both achieved similar success throughout the study period. Interestingly, the behavioural response (i.e. tactic use and specialization) to experience by individual predators differed. For instance, 42.7% of the population did not alter their degree of specialization with experience (i.e. remaining either faster and more specialized, or slower and more flexible), while 57.3% of the population displayed a switch from a specialized to a flexible tactic or vice-versa with experience. Thus, our results provide direct evidence that the mechanism underlying the resource-predictability hypothesis may indeed involve predators learning at varying degrees how to specialize on their prey [@Weimerskirch.etal2005;@Weimerskirch2007;@Woo.etal2008;@Phillips.etal2017].

As predators gained experience, their tactic was increasingly matched to the speed of their prey. One interpretation could be that both predators and prey learned from each other in an arms-race-like reciprocal relationship [@Kishida.etal2006;@Kishida.etal2009;@Edgell.Rochette2009a;@Mougi.etal2011]. For instance, predators that encountered faster prey could have learned to increase their speed to better capture them, resulting in an increase in the speed of the prey to circumvent the predator's attacks. In this type of system, faster prey should be better at escaping both slower and faster predators [@Mougi.etal2011], which concords with what we previously observed in this sytem [@FraserFranco.etal2022]. @BrodieIII.BrodieJr.1999 argue that when prey express defensive phenotypes (e.g. physical armaments or venom), selection on predators should be strong because the consequences of being injured are greater than missing a meal. If predators improve their exploitative ability, then an arms-race should emerge, and the consequences of hunting dangerous prey should decrease [@BrodieIII.BrodieJr.1999]. Similarly, we found that has the predator gained experience, the negative consequences of encountering prey groups with higher speeds were relaxed, and the variation in success among predators decreased. However, in an arms-race, faster predators would have successfully preyed upon faster and slower prey and would have obtained higher success than slower predators [@Mougi.etal2011], which was not the case in the present study. A more likely scenario is that predators and prey in *DBD* were involved in a matching response relationship [@Mougi.etal2011], because faster-specialist and slower-flexible hunters preyed upon different prey, but they both achieved equal success. Thus predators in *DBD* appear to optimize their success by learning to match their tactic to their prey with experience, suggesting that learning through reciprocal interactions may attenuate selection exerted by prey on predators [@Anderson1995;@Ancel1999;@Borenstein.etal2006;@Paenke.etal2007].

## Conclusions

Trait-mediated predator-prey interactions are important processes involved in population cycles and should occur when predators match their phenotype to their prey [@abramsEvolutionPredatorPreyInteractions2000]. Yet, it has remained largely unknown whether this trait-matching results from predators learning how to capture their prey, in part because of the challenges of investigating direct interactions in the wild. By capitalizing on a virtual predator-prey system where interactions were directly monitored, we found that individual predators displayed large differences in the development of their expertise. With experience, half of the predator population changed their behaviour by developping either a specialized or flexible tactic that was matched to the speed of their prey. Overall, both type of hunters achieved equal hunting success. Our results have potential applications for predator-prey models of trait-matching. For instance, simulation studies could incorporate individual variation in experience or learning to better predict under which ecological/evolutionary contexts specialization should be favoured over flexibility. Lastly, virtual systems are increasingly recognized among ecologists as being useful to test hypotheses on consumer-resource interactions [@Barbe.etal2020;@Beauchamp2020;@Cere.etal2021;@FraserFranco.etal2022], but also in other fields such as citizen science and conservation [@Sandbrook.etal2015;@Redpath.etal2018;@Duthie.etal2021]. We therefore hope that our study will inspire more collaborations between scientists and the videogame industry to tackle fundamental questions in ecology.



# ACKNOWLEDGEMENTS

We warmly thank Behaviour Interactive Inc. for our collaboration which helps in advancing predator-prey science. We thank Julien Céré who managed the communication between us and the company, and Marine Dupuy who helped us prepare the data used in this study. We thank Alastair J. Wilson for insightful comments on the results. We also thank all members of Pierre-Olivier Montiglio's laboratory who provided useful feedback on earlier versions on this work. This work was supported by an NSERC postgraduate doctoral scholarship (569716-2022).




# CONFLICT OF INTEREST STATEMENT

The authors declare no conflict of interest

\newpage




# REFERENCES {.unnumbered}

<div id="refs"></div>

\newpage




# TABLES

```{r table1, ft.align = "left"}

# ===========================================================================
# 1. Import the model fit
# ===========================================================================

# Open the loo table
path <- file.path(here::here("outputs", "02_outputs_model-validation"))
loo_tab <- data.table(readRDS(file.path(path, "GAMM_loo-cv-table.rds")))

# Add model column
loo_tab[
  , model := c(
    "prey speed + group-level smoothers",
    "predator xp + prey speed + group-level smoothers",
    "group-level smoothers",
    "predator xp + group-level smoothers",
    "predator xp"
    )
 ]

# Reorder columns
loo_tab <- loo_tab[, c(9, 1:8)]

# ===========================================================================
# ===========================================================================





# ===========================================================================
# 2. Compute the table using flextable
# ===========================================================================

# Prepare the table parameters ----------------------------------------------

# Custom header
my_header <- data.frame(
   col_keys = c("model",
                "elpd_diff",
                "se_diff",
                "elpd_loo",
                "se_elpd_loo"),
   line1 = c("model",
             "elpd \ndifference",
             "sd \ndifference",
             "elpd loo \nvalue",
             "elpd loo \nstandard error"),
   stringsAsFactors = FALSE
)

# Custom theme
my_theme <- function(x, ...) {
   x <- colformat_double(x, big.mark = " ",
                         decimal.mark = ".",
                         digits = 2)
   x <- set_table_properties(x, layout = "autofit")
   x <- border_remove(x)
   std_border <- fp_border(width = 1, color = "black")
   x <- hline_top(x, part = "all", border = std_border)
   x <- hline_bottom(x, part = "all", border = std_border)
}



# Create the table ----------------------------------------------------------

tab1 <- loo_tab %>%
  select(model, elpd_diff, se_diff, elpd_loo, se_elpd_loo) %>%
  flextable(col_keys = my_header$col_keys) %>%
  set_header_df(mapping = my_header, key = "col_keys") %>%
  my_theme() %>%
  align(align = "left", part = "all", j = 1) %>%
  align(align = "center", part = "all", j = 2) %>%
  align(align = "center", part = "all", j = 3) %>%
  align(align = "center", part = "all", j = 4) %>%
  align(align = "center", part = "all", j = 5) %>%
  footnote(
    i = 1, j = 1,
    part = "header",
    value = as_paragraph(
      as_sup("a "),
      "'elpd' refers to the expected log pointwise density and is the value chosen to select the best model.",
      as_sup("\nb "),
      "'xp' is an acronym for experience"),
    ref_symbols = " "
  ) %>%

  # Table caption
  set_caption(
    caption = "Table 1. Leave-one-out cross-validation table of the five hierarchical GAMMs relating hunting success to player experience.",
    style = "Table Caption"
  ) %>%

  # Font options
  font(fontname = "Times New Roman", part = "all") %>%
  fontsize(size = 10, part = "all") %>%
  fontsize(size = 12, part = "footer")

tab1
# ===========================================================================
# ===========================================================================

```

\newpage



# FIGURE CAPTIONS

**Figure 1.** Among individual differences in the development of hunting expertise. The predators' hunting success (i.e. the probability of capturing the four prey) is on the y axis, and the predators' cumulative experience (i.e. the number of matches played prior to each observation) is on the x axis. Each fitted curve represents an individual predator. (A) A generalized additive mixed model where we do not control for prey speed (B) A generalized additive mixed model where we control for prey speed.

**Figure 2.** Posterior median differences and credible intervals between each predator experience level's parameters. Each panel shows the experience levels that are compared. The parameter compared is on the y axis, and the difference of the values predicted by the MDHGLM is on the x axis. The intercepts correspond to mean population speed and specialization. The predator ID on the mean are individual differences in mean speed, mean speed of prey groups encountered, and success. The predator ID on the dispersion (i.e. sigma) are individual differences in specialization, and in the heterogeneity of prey encountered.

**Figure 3.** Individual behavioural distribution of the predators' speed drawn from the MDHGLM estimates for individuals that had (A) the greatest increase in specialization and (B) the greatest increase in flexibility. The background (gray) distributions are for when individuals were novice hunters, and the foreground (blue) distributions with solid contour lines are for when they were advanced hunters. Both figure panels are ordered by ascending degree of increase in either specialization or flexibility. We selected the individuals displayed in the figure by first subtracting the estimated standard deviation of all individuals as novices with their standard deviation as advanced hunters, and then selecting those with the greatest difference using the 25% and 75% quantiles. Individuals on panel A have an increase in specialization equal or greater than 0.2 standard deviations, while those on panel B have an increase in flexibility equal or greater than 0.28 standard deviations.

**Figure 4.** Correlation matrices of the MDHGLM relating the mean and intra individual variability (IIV) in speed of the predators, the mean and IIV in speed of the prey they encountered, and mean hunting success. Larger dark blue circles indicate stronger positive correlations (positive values on the color legend), while larger dark red circles indicate stronger negative correlations (negative values on the color legend). A) Correlations when predators were novice hunters. B) Correlations when predators were advanced hunters. C) Posterior median differences and credible intervals comparing the correlations between traits when predators were advanced vs novice. The median difference is displayed on the x axis and the trait correlations being compared are displayed on the y axis.

\newpage




# FIGURES

```{r fig1, out.width = "100%", fig.cap = "**Figure 1**"}

knitr::include_graphics(
  here::here("outputs", "04_outputs_figures", "figure1.png")
)

```

\newpage

```{r fig2, out.width = "100%", fig.cap = "**Figure 2**"}

knitr::include_graphics(
  here::here("outputs", "04_outputs_figures", "figure2.png")
)

```

\newpage

```{r fig3, out.width = "100%", fig.cap = "**Figure 3**"}

knitr::include_graphics(
  here::here("outputs", "04_outputs_figures", "figure3.png")
)

```

\newpage

```{r fig4, out.width = "100%", fig.cap = "**Figure 4**"}

knitr::include_graphics(
  here::here("outputs", "04_outputs_figures", "figure4.png")
)

```